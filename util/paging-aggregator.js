"use strict";const Promise=require("bluebird");function safeAssignFunction(e,t){if(e&&"function"==typeof e)return e;throw new ReferenceError(`Parameter ${t} isn't function!`)}class PagingAggregator{constructor(e,t,n){e=safeAssignFunction(e,"fetchData"),t=safeAssignFunction(t,"processChunk"),n=safeAssignFunction(n,"nextOffset"),this.fetch=function r(s,o,i,c=[]){let u;try{u=Promise.resolve(e(s,o,i))}catch(e){u=Promise.reject(e)}return u.then(e=>{c=t(c,e,o,i);const u=n(c,e,o,i);return u>-1?r(s,u,i,c):c})}}}module.exports=PagingAggregator;